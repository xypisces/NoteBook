# 2016-5-12

### 分页和搜索功能
```javascript
------分页功能
   //routes.js下添加路由
   app.get('/results',Index.search)
   //index.js下添加方法
   


-----搜索功能
///controllers/index.js
    else{
            Movie
                .find({title: new RegExp(q + '.*','i')})
                .exec(function(err,movies){
                if(err){
                    console.log(err)
                    }
                var results = movies.slice(index, index + count)
                res.render('results',{
                    title:'imooc 结果列表页面',
                    keyword: q,
                    currentPage: (page + 1),
                    query:'q='+q,
                    totalPage: Math.ceil(movies.length / count),
                    movies:results
                })
            })  
        }